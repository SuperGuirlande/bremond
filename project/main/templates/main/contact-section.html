{% load custom_tags %}
<section class="min-h-screen bg-granit flex relative">
    <span class="absolute -translate-y-32" id="contact"></span>
    <div class="container mx-auto my-auto flex flex-col">
        <!-- Titre -->
        <div class="text-center relative my-12">
            <h2 class="gilda text-4xl sm:text-5xl md:text-6xl lg:text-7xl blanc"
                data-aos="fade-in" data-aos-duration="1500" data-aos-delay="00" data-anchor-placement="top-center">
                Contactez-Nous
            </h2>
            <h4 class="alex mt-2 blanc text-3xl sm:text-4xl md:text-6xl font-light"
                data-aos="fade-in" data-aos-duration="1500" data-aos-delay="200" data-anchor-placement="top-center">
                Ensemble, faisons revivre votre patrimoine
            </h4>
            <div class="w-96 h-[1px] bg-pierre absolute z-30 left-1/2 bottom-0 -translate-x-1/2 translate-y-10"></div>
        </div>

        <!-- Conteneur principal -->
        <div class="flex justify-evenly gap-5 flex-wrap my-12"
             data-aos="fade-in" data-aos-duration="2000" data-aos-delay="00" data-anchor-placement="top-center">
            
            <!-- GAUCHE INFOS -->
            <div class="basis-[350px] shrink grow mx-2 sm:mx-0 sm:grow-0 sm:shrink-0 sm:basis-[600px] bg-pierre py-16">
                <h2 class="granit text-center playfair text-5xl mb-5">Bremond RÃ©novation</h2>
                <p class="inter font-light text-lg sm:text-2xl terre text-center">
                    14 rue de la salamandre <br>
                    17520 Lonzac <br><br>

                    06 43 41 45 87 | 07 69 55 08 96 <br>
                    bremondrenovation@gmail.com <br><br>

                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2791.731418683104!2d-0.3902682999999999!3d45.5959437!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8184f6bcc1dbe611%3A0x76b4635467cee0c4!2sSARL%20BREMOND%20R%C3%A9novation!5e0!3m2!1sfr!2sfr!4v1731327150844!5m2!1sfr!2sfr"
                            height="350" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
                            class="mx-auto px-5 w-full">
                    </iframe>
                </p>
            </div>

            <!-- DROITE FORM -->
            <div class="basis-[300px] shrink grow mx-2 sm:mx-0 sm:grow-0 sm:shrink-0 sm:basis-[600px] bg-pierre py-12 flex flex-col">
                <h2 class="granit text-center playfair text-5xl mb-5">Envoyez votre Message</h2>

                <!-- FORMULAIRE -->
                <form action="#contact" method="post"
                      class="my-auto mx-auto w-full max-w-[500px] px-3 flex flex-col gap-6 mt-10">
                    
                    <!-- Alertes -->
                    {% if request.session.success %}
                    <div class="w-full bg-green-100 border-l-4 border-green-500 rounded-md p-4 mb-6">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-green-500" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <div class="ml-3">
                                <p class="text-green-700 font-medium text-lg">
                                    {{ request.session.success }}
                                </p>
                            </div>
                        </div>
                    </div>
                    {% clear_session_message 'success' %}
                    {% elif request.session.alert %}
                    <div class="w-full bg-red-100 border-l-4 border-red-500 rounded-md p-4 mb-6">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-red-500" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <div class="ml-3">
                                <p class="text-red-700 font-medium text-lg">
                                    {{ request.session.alert }}
                                </p>
                            </div>
                        </div>
                    </div>
                    {% clear_session_message 'alert' %}
                    {% endif %}

                    {% csrf_token %}
                    
                    <!-- NOM ET PRENOM -->
                    <div class="flex gap-5">
                        <div class="flex-1">
                            {{form.first_name}}
                        </div>
                        <div class="flex-1">
                            {{form.last_name}}
                        </div>
                    </div>

                    <!-- EMAIL -->
                    <div class="w-full">
                        {{form.email}}
                        {% for error in form.email.errors %}
                        <p class="text-lg text-red-500">{{error}}</p>
                        {% endfor %}
                    </div>

                    <!-- TELEPHONE -->
                    <div class="w-full">
                        {{form.phone}}
                        {% for error in form.phone.errors %}
                        <p class="text-lg text-red-500">{{error}}</p>
                        {% endfor %}
                    </div>

                    <!-- MESSAGE -->
                    <div class="w-full">
                        {{form.message}}
                    </div>

                    <!-- SUBMIT BUTTON -->
                    <div class="mb-5">
                        <button type="submit" class="py-3 px-6 bg-ocre text-white text-xl playfair tracking-wider hover:bg-amber-900 shadow-md hover:shadow-xl transition-all duration-300 ease-in-out mx-auto block">
                            Envoyer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<style>
    input, textarea {
        width: 100% !important;
        padding: 0.75rem 1rem !important;
        border: 1px solid #e5e7eb !important;
        border-radius: 0.375rem !important;
        transition: all 0.2s !important;
    }

    input:focus, textarea:focus {
        outline: none !important;
        border-color: var(--ocre) !important;
        box-shadow: 0 0 0 3px rgba(200, 169, 119, 0.2) !important;
    }

    textarea {
        min-height: 150px;
        resize: vertical;
    }
</style>